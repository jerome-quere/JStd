// Generated by CoffeeScript 1.4.0
(function() {
  var jstl,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

  jstl = (function() {

    function jstl() {}

    return jstl;

  })();

  jstl.exception = (function() {

    function exception() {
      this.message = this.what();
    }

    exception.prototype.what = function() {
      return "exception";
    };

    return exception;

  })();

  jstl.logic_error = (function(_super) {

    __extends(logic_error, _super);

    function logic_error() {
      return logic_error.__super__.constructor.apply(this, arguments);
    }

    logic_error.prototype.what = function() {
      return "logic_error";
    };

    return logic_error;

  })(jstl.exception);

  jstl.out_of_range = (function(_super) {

    __extends(out_of_range, _super);

    function out_of_range() {
      return out_of_range.__super__.constructor.apply(this, arguments);
    }

    out_of_range.prototype.what = function() {
      return "out_of_range";
    };

    return out_of_range;

  })(jstl.logic_error);

  jstl.foreach = function(first, last, f) {
    while (first.neq(last)) {
      f(first.get());
      first.next();
    }
    return f;
  };

  jstl.min = function(obj1, obj2) {
    if (typeof obj1 === "number" || typeof obj1 === "bool" || typeof obj1 === "string" || obj1 instanceof Array) {
      if (!(obj2 < obj1)) {
        return obj1;
      } else {
        return obj2;
      }
    }
    if (!(obj2.lt(obj1))) {
      return obj1;
    } else {
      return obj2;
    }
  };

  jstl.max = function(obj1, obj2) {
    if (typeof obj1 === "number" || typeof obj1 === "bool" || typeof obj1 === "string" || obj1 instanceof Array) {
      if (obj1 < obj2) {
        return obj2;
      } else {
        return obj1;
      }
    }
    if (obj1.lt(obj2)) {
      return obj2;
    } else {
      return obj1;
    }
  };

  jstl.vector = (function() {

    function vector() {
      this.array = [];
    }

    vector.prototype.clone = function() {
      var v;
      v = new jstl.vector();
      v.insertRange(this.begin(), this.end());
      return v;
    };

    vector.prototype.at = function(idx) {
      if (idx < 0 || idx >= this.size()) {
        throw new jstl.out_of_range();
      }
      return this.get(idx);
    };

    vector.prototype.get = function(idx) {
      return this.array[idx];
    };

    vector.prototype.back = function() {
      return this.array[this.size() - 1];
    };

    vector.prototype.front = function() {
      return this.array[0];
    };

    vector.prototype.data = function() {
      return this.array;
    };

    vector.prototype.push_back = function(value) {
      return this.array.push(value);
    };

    vector.prototype.pop_back = function(value) {
      return this.array.pop();
    };

    vector.prototype.size = function() {
      return this.array.length;
    };

    vector.prototype.empty = function() {
      return this.size() === 0;
    };

    vector.prototype.resize = function(size) {
      if (size < 0) {
        size = 0;
      }
      return this.array.splice(size, this.size());
    };

    vector.prototype.clear = function() {
      return this.resize(0);
    };

    vector.prototype.swap = function(obj) {
      var _ref, _ref1;
      _ref = [obj.array, this.array], this.array = _ref[0], obj.array = _ref[1];
      return _ref1 = [obj.idx, this.idx], this.idx = _ref1[0], obj.idx = _ref1[1], _ref1;
    };

    vector.prototype.begin = function() {
      return new this.iterator(this, 0);
    };

    vector.prototype.end = function() {
      return new this.iterator(this, this.size());
    };

    vector.prototype.rbegin = function() {
      return new this.riterator(this, this.size() - 1);
    };

    vector.prototype.rend = function() {
      return new this.riterator(this, -1);
    };

    vector.prototype.insert = function(it, value) {
      return this.array.splice(it.idx, 0, value);
    };

    vector.prototype.insertRange = function(first, last) {
      var _this = this;
      return jstl.foreach(first, last, function(e) {
        return _this.push_back(e);
      });
    };

    vector.prototype.erase = function(it) {
      return this.array.splice(it.idx, 1);
    };

    vector.prototype.eraseRange = function(first, last) {
      if (last.idx < first.idx) {
        last.prev();
        first.prev();
      }
      return this.array.splice(jstl.min(first.idx, last.idx), Math.abs(first.idx - last.idx));
    };

    vector.prototype.iterator = (function() {

      function iterator(vector, idx) {
        this.vector = vector;
        this.idx = idx;
      }

      iterator.prototype.get = function() {
        return this.vector.get(this.idx);
      };

      iterator.prototype.next = function() {
        return this.idx++;
      };

      iterator.prototype.prev = function() {
        return this.idx--;
      };

      iterator.prototype.eq = function(it) {
        return this.idx === it.idx;
      };

      iterator.prototype.lt = function(it) {
        return this.idx < it.idx;
      };

      iterator.prototype.neq = function(it) {
        return !this.eq(it);
      };

      iterator.prototype.lte = function(it) {
        return this.lt(it) || this.eq(it);
      };

      iterator.prototype.gt = function(it) {
        return !this.lte(it);
      };

      iterator.prototype.gte = function(it) {
        return this.gt(it) || this.eq(it);
      };

      iterator.prototype.add = function(v) {
        return new iterator(this.vector, this.idx + v);
      };

      iterator.prototype.sub = function(v) {
        return new iterator(this.vector, this.idx - v);
      };

      return iterator;

    })();

    vector.prototype.riterator = (function(_super) {

      __extends(riterator, _super);

      function riterator() {
        return riterator.__super__.constructor.apply(this, arguments);
      }

      riterator.prototype.next = function() {
        return this.idx--;
      };

      riterator.prototype.prev = function() {
        return this.idx++;
      };

      riterator.prototype.lt = function(it) {
        console.log("" + this.idx + " > " + it.idx);
        return this.idx > it.idx;
      };

      riterator.prototype.add = function(v) {
        return new riterator(this.vector, this.idx - v);
      };

      riterator.prototype.sub = function(v) {
        return new riterator(this.vector, this.idx + v);
      };

      return riterator;

    })(vector.prototype.iterator);

    return vector;

  })();

  module.exports = jstl;

}).call(this);
